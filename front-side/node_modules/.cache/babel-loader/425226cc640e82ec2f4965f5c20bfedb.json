{"ast":null,"code":"var _jsxFileName = \"/Users/davegb313/code/harvester-app/front-side/src/components/form-section.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useState } from \"react\";\nimport { Card, Button, TextField } from \"@mui/material\";\nimport CustomTable from \"./table\";\nimport './form-section.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst inputReducer = (state, action) => {\n  switch (action.type) {\n    case 'change':\n      return { ...state,\n        value: action.value,\n        isValid: action.isValid\n      };\n\n    case 'touch':\n      return { ...state,\n        isTouched: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nfunction createData(name, calories) {\n  return {\n    name,\n    calories\n  };\n}\n\nconst rows = [createData('Cupcake', 305), createData('Donut', 452), createData('Eclair', 262), createData('Frozen yoghurt', 159), createData('Gingerbread', 356), createData('Honeycomb', 408), createData('Ice cream sandwich', 237), createData('Jelly Bean', 375), createData('KitKat', 518), createData('Lollipop', 392), createData('Marshmallow', 318), createData('Nougat', 360), createData('Oreo', 437)];\n\nconst Form = props => {\n  _s();\n\n  const [loadedData, setLoadedData] = useState({});\n  const [inputState, dispatch] = useReducer(inputReducer, {\n    value: '',\n    isValid: false,\n    isTouched: false\n  });\n  const regex = new RegExp('[a-zA-Z0-9@.]{2,256}\\.[a-z]{2,6}');\n\n  const changeHandler = event => {\n    dispatch({\n      type: 'change',\n      value: event.target.value,\n      isValid: regex.test(event.target.value)\n    });\n    console.log(inputState);\n  };\n\n  const touchHandler = () => {\n    dispatch({\n      type: 'touch'\n    });\n  };\n\n  const sendReqHandler = async () => {\n    console.log('req sent with data:', inputState.value);\n\n    try {\n      const response = await fetch('http://localhost:5000/getdata', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          domainToCheck: inputState.value\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error! status: ${response.status}`);\n      }\n\n      const returnedData = await response.json();\n      setLoadedData(returnedData);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-section\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        sx: {\n          width: 250\n        },\n        label: \"Your website:\",\n        variant: \"standard\",\n        onChange: changeHandler,\n        onBlur: touchHandler,\n        value: inputState.value,\n        error: !inputState.isValid && inputState.isTouched,\n        helperText: !inputState.isValid && inputState.isTouched && 'incorrect value.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        sx: {\n          height: 40\n        },\n        variant: \"outlined\",\n        onClick: sendReqHandler,\n        children: \"Fetch data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results\",\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), rows.length === 0 ? /*#__PURE__*/_jsxDEV(Card, {\n        className: \"no-results-card\",\n        variant: \"outlined\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Nothing fetched yet, please send a request\\uD83D\\uDD1D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(CustomTable, {\n        rows: rows\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Form, \"YzYW6jpw4VgDWpr+A13n5W24ow4=\");\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/davegb313/code/harvester-app/front-side/src/components/form-section.js"],"names":["React","useReducer","useState","Card","Button","TextField","CustomTable","inputReducer","state","action","type","value","isValid","isTouched","createData","name","calories","rows","Form","props","loadedData","setLoadedData","inputState","dispatch","regex","RegExp","changeHandler","event","target","test","console","log","touchHandler","sendReqHandler","response","fetch","method","headers","body","JSON","stringify","domainToCheck","ok","Error","status","returnedData","json","err","width","height","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SACIC,IADJ,EAEIC,MAFJ,EAGIC,SAHJ,QAIO,eAJP;AAMA,OAAOC,WAAP,MAAwB,SAAxB;AACA,OAAO,oBAAP;;;AAEA,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACpC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,QAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEHG,QAAAA,KAAK,EAAEF,MAAM,CAACE,KAFX;AAGHC,QAAAA,OAAO,EAAEH,MAAM,CAACG;AAHb,OAAP;;AAKJ,SAAK,OAAL;AACI,aAAO,EACH,GAAGJ,KADA;AAEHK,QAAAA,SAAS,EAAE;AAFR,OAAP;;AAIJ;AACI,aAAOL,KAAP;AAbR;AAeH,CAhBD;;AAmBA,SAASM,UAAT,CAAoBC,IAApB,EAA0BC,QAA1B,EAAoC;AAChC,SAAO;AAAED,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAP;AACH;;AAED,MAAMC,IAAI,GAAG,CACTH,UAAU,CAAC,SAAD,EAAY,GAAZ,CADD,EAETA,UAAU,CAAC,OAAD,EAAU,GAAV,CAFD,EAGTA,UAAU,CAAC,QAAD,EAAW,GAAX,CAHD,EAITA,UAAU,CAAC,gBAAD,EAAmB,GAAnB,CAJD,EAKTA,UAAU,CAAC,aAAD,EAAgB,GAAhB,CALD,EAMTA,UAAU,CAAC,WAAD,EAAc,GAAd,CAND,EAOTA,UAAU,CAAC,oBAAD,EAAuB,GAAvB,CAPD,EAQTA,UAAU,CAAC,YAAD,EAAe,GAAf,CARD,EASTA,UAAU,CAAC,QAAD,EAAW,GAAX,CATD,EAUTA,UAAU,CAAC,UAAD,EAAa,GAAb,CAVD,EAWTA,UAAU,CAAC,aAAD,EAAgB,GAAhB,CAXD,EAYTA,UAAU,CAAC,QAAD,EAAW,GAAX,CAZD,EAaTA,UAAU,CAAC,MAAD,EAAS,GAAT,CAbD,CAAb;;AAgBA,MAAMI,IAAI,GAAGC,KAAK,IAAI;AAAA;;AAClB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BnB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACoB,UAAD,EAAaC,QAAb,IAAyBtB,UAAU,CAACM,YAAD,EAAe;AAAEI,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,OAAO,EAAE,KAAtB;AAA6BC,IAAAA,SAAS,EAAE;AAAxC,GAAf,CAAzC;AACA,QAAMW,KAAK,GAAG,IAAIC,MAAJ,CAAW,kCAAX,CAAd;;AAEA,QAAMC,aAAa,GAAGC,KAAK,IAAI;AAC3BJ,IAAAA,QAAQ,CAAC;AACLb,MAAAA,IAAI,EAAE,QADD;AAELC,MAAAA,KAAK,EAAEgB,KAAK,CAACC,MAAN,CAAajB,KAFf;AAGLC,MAAAA,OAAO,EAAEY,KAAK,CAACK,IAAN,CAAWF,KAAK,CAACC,MAAN,CAAajB,KAAxB;AAHJ,KAAD,CAAR;AAKAmB,IAAAA,OAAO,CAACC,GAAR,CAAYT,UAAZ;AACH,GAPD;;AASA,QAAMU,YAAY,GAAG,MAAM;AACvBT,IAAAA,QAAQ,CAAC;AAAEb,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACH,GAFD;;AAIA,QAAMuB,cAAc,GAAG,YAAY;AAC/BH,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCT,UAAU,CAACX,KAA9C;;AACA,QAAI;AACA,YAAMuB,QAAQ,GAAG,MAAMC,KAAK,CAAC,+BAAD,EAAkC;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFiD;AAG1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,UAAAA,aAAa,EAAEnB,UAAU,CAACX;AADT,SAAf;AAHoD,OAAlC,CAA5B;;AAQA,UAAI,CAACuB,QAAQ,CAACQ,EAAd,EAAkB;AACd,cAAM,IAAIC,KAAJ,CAAW,kBAAiBT,QAAQ,CAACU,MAAO,EAA5C,CAAN;AACH;;AAED,YAAMC,YAAY,GAAG,MAAMX,QAAQ,CAACY,IAAT,EAA3B;AACAzB,MAAAA,aAAa,CAACwB,YAAD,CAAb;AACH,KAfD,CAeE,OAAOE,GAAP,EAAY;AACVjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACH;AACJ,GApBD;;AAsBA,sBACI,QAAC,KAAD,CAAO,QAAP;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACI,QAAC,SAAD;AACI,QAAA,EAAE,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT,SADR;AAEI,QAAA,KAAK,EAAC,eAFV;AAGI,QAAA,OAAO,EAAC,UAHZ;AAII,QAAA,QAAQ,EAAEtB,aAJd;AAKI,QAAA,MAAM,EAAEM,YALZ;AAMI,QAAA,KAAK,EAAEV,UAAU,CAACX,KANtB;AAOI,QAAA,KAAK,EAAE,CAACW,UAAU,CAACV,OAAZ,IAAuBU,UAAU,CAACT,SAP7C;AAQI,QAAA,UAAU,EAAE,CAACS,UAAU,CAACV,OAAZ,IAAuBU,UAAU,CAACT,SAAlC,IAA+C;AAR/D;AAAA;AAAA;AAAA;AAAA,cADJ,eAWI,QAAC,MAAD;AACI,QAAA,EAAE,EAAE;AAAEoC,UAAAA,MAAM,EAAE;AAAV,SADR;AAEI,QAAA,OAAO,EAAC,UAFZ;AAGI,QAAA,OAAO,EAAEhB,cAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAoBI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKhB,IAAI,CAACiC,MAAL,KAAgB,CAAhB,gBACG,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,iBAAhB;AAAkC,QAAA,OAAO,EAAC,UAA1C;AAAA,+BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADH,gBAOG,QAAC,WAAD;AAAa,QAAA,IAAI,EAAEjC;AAAnB;AAAA;AAAA;AAAA;AAAA,cATR;AAAA;AAAA;AAAA;AAAA;AAAA,YApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAmCH,CA3ED;;GAAMC,I;;KAAAA,I;AA6EN,eAAeA,IAAf","sourcesContent":["import React, { useReducer, useState } from \"react\";\nimport {\n    Card,\n    Button,\n    TextField\n} from \"@mui/material\";\n\nimport CustomTable from \"./table\";\nimport './form-section.css';\n\nconst inputReducer = (state, action) => {\n    switch (action.type) {\n        case 'change':\n            return {\n                ...state,\n                value: action.value,\n                isValid: action.isValid\n            }\n        case 'touch':\n            return {\n                ...state,\n                isTouched: true\n            }\n        default:\n            return state;\n    }\n};\n\n\nfunction createData(name, calories) {\n    return { name, calories };\n}\n\nconst rows = [\n    createData('Cupcake', 305),\n    createData('Donut', 452),\n    createData('Eclair', 262),\n    createData('Frozen yoghurt', 159),\n    createData('Gingerbread', 356),\n    createData('Honeycomb', 408),\n    createData('Ice cream sandwich', 237),\n    createData('Jelly Bean', 375),\n    createData('KitKat', 518),\n    createData('Lollipop', 392),\n    createData('Marshmallow', 318),\n    createData('Nougat', 360),\n    createData('Oreo', 437),\n];\n\nconst Form = props => {\n    const [loadedData, setLoadedData] = useState({});\n    const [inputState, dispatch] = useReducer(inputReducer, { value: '', isValid: false, isTouched: false });\n    const regex = new RegExp('[a-zA-Z0-9@.]{2,256}\\.[a-z]{2,6}');\n\n    const changeHandler = event => {\n        dispatch({\n            type: 'change',\n            value: event.target.value,\n            isValid: regex.test(event.target.value),\n        });\n        console.log(inputState);\n    };\n\n    const touchHandler = () => {\n        dispatch({ type: 'touch' });\n    };\n\n    const sendReqHandler = async () => {\n        console.log('req sent with data:', inputState.value);\n        try {\n            const response = await fetch('http://localhost:5000/getdata', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    domainToCheck: inputState.value\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error(`Error! status: ${response.status}`);\n            }\n\n            const returnedData = await response.json();\n            setLoadedData(returnedData);\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    return (\n        <React.Fragment>\n            <div className=\"form-section\">\n                <TextField\n                    sx={{ width: 250, }}\n                    label=\"Your website:\"\n                    variant=\"standard\"\n                    onChange={changeHandler}\n                    onBlur={touchHandler}\n                    value={inputState.value}\n                    error={!inputState.isValid && inputState.isTouched}\n                    helperText={!inputState.isValid && inputState.isTouched && 'incorrect value.'}\n                />\n                <Button\n                    sx={{ height: 40 }}\n                    variant=\"outlined\"\n                    onClick={sendReqHandler}\n                >\n                    Fetch data\n                </Button>\n            </div>\n            <div className=\"results\">\n                <hr />\n                {rows.length === 0 ? (\n                    <Card className='no-results-card' variant=\"outlined\">\n                        <p>\n                            Nothing fetched yet, please send a request🔝\n                        </p>\n                    </Card>\n                ) : (\n                    <CustomTable rows={rows} />\n                )}\n            </div>\n        </React.Fragment >\n    )\n}\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}